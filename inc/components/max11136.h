/*
 * max11136.h
 *
 *  Created on: 17 nov. 2018
 *      Author: Ludo
 */

#ifndef MAX11136_H
#define MAX11136_H

#include "wind.h"

/*** MAX11136 macros ***/

// Full scale on 12-bits.
#define MAX11136_FULL_SCALE		4095

// Channels definition.
#define MAX11136_CHANNEL_AIN0	0
#define MAX11136_CHANNEL_AIN1	1
#define MAX11136_CHANNEL_AIN2	2
#define MAX11136_CHANNEL_AIN3	3
#define MAX11136_CHANNEL_AIN4	4
#define MAX11136_CHANNEL_AIN5	5
#define MAX11136_CHANNEL_AIN6	6
#define MAX11136_CHANNEL_AIN7	7

// Channels mapping.
#ifdef HW1_0
#if (defined CM || defined ATM)
#ifdef WIND_VANE_ARGENT_DATA_SYSTEMS
#define MAX11136_CHANNEL_WIND_DIRECTION		MAX11136_CHANNEL_AIN0
#endif
#endif
#define MAX11136_CHANNEL_SOLAR_CELL			MAX11136_CHANNEL_AIN4
#define MAX11136_CHANNEL_SUPERCAP			MAX11136_CHANNEL_AIN5
#define MAX11136_CHANNEL_LDR				MAX11136_CHANNEL_AIN6
#define MAX11136_CHANNEL_BANDGAP			MAX11136_CHANNEL_AIN7
#define MAX11136_BANDGAP_VOLTAGE_MV			2048
#endif
#ifdef HW2_0
#if (defined CM || defined ATM)
#ifdef WIND_VANE_ARGENT_DATA_SYSTEMS
#define MAX11136_CHANNEL_WIND_DIRECTION		MAX11136_CHANNEL_AIN0
#endif
#endif
#define MAX11136_CHANNEL_LDR				MAX11136_CHANNEL_AIN1
#define MAX11136_CHANNEL_BANDGAP			MAX11136_CHANNEL_AIN5
#define MAX11136_BANDGAP_VOLTAGE_MV			2048
#define MAX11136_CHANNEL_SOLAR_CELL			MAX11136_CHANNEL_AIN6
#define MAX11136_CHANNEL_SUPERCAP			MAX11136_CHANNEL_AIN7
#endif

/*** MAX11136 functions ***/

void MAX11136_Init(void);
void MAX11136_DisableGpio(void);
void MAX11136_PerformMeasurements(void);
void MAX11136_GetChannel(unsigned char channel, unsigned int* channel_result_12bits);

#endif /* MAX11136_H */
